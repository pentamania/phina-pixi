<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: App.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">

    <!-- add my custom style -->
    <style type="text/css">
        h4.name {
            background: #efbbdd;
            border-radius: 0.2rem;
            font-weight: bold;
            font-size: 1.4rem;
        }
    </style>
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: App.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import * as phina from "phina.js";
import * as PIXI from "pixi.js";
import {toHex} from "./utils.js";
import {PixiScene} from './element.js';
var defaultParams = {
  width: 640,
  height: 960,
  fit: true,
  append: true,
};

/**
 * &lt;pre>
 * Create app core using pixi.js's renderer for rendering.
 * レンダラーとしてpixi.js rendererを使うAppコアクラス
 * &lt;/pre>
 *
 * @class phina.pixi.PixiApp
 * @memberOf phina.pixi
 * @extends phina.display.DomApp
 *
 * @param {object} options - parameter almost same as phina.display.CanvasApp
*/
export default phina.createClass({
  superClass: phina.display.DomApp,

  init: function(options) {
    options = ({}).$safe(options, defaultParams);
    var bg = toHex(options.backgroundColor);
    var forceCanvas = options.forceCanvas || false;

    var domElement = options.domElement;
    if (!domElement &amp;&amp; options.query) {
      domElement = document.querySelector(options.query);
    }
    var renderer = PIXI.autoDetectRenderer(options.width, options.height, {
      transparent: (bg != null) ? null : true,
      forceCanvas: forceCanvas, // for recent pixi
      view: domElement,
    }, forceCanvas); // for legacy pixi
    if (bg != null) renderer.backgroundColor = bg;
    options.domElement = renderer.view;

    this.superInit(options);
    this.renderer = renderer;
    this.canvas = this.domElement;
    phina.graphics.Canvas.prototype.setSize.call(this, options.width, options.height);
    if (!domElement &amp;&amp; !options.query &amp;&amp; options.append) {
      document.body.appendChild(this.domElement);
    }

    if (options.fit) {
      phina.graphics.Canvas.prototype.fitScreen.call(this);
    }

    if (options.startScene) {
      this.replaceScene(options.startScene(options));
    } else {
      this.replaceScene(PixiScene(options));
    }

    if (options.pixelated) {
      // チラつき防止
      // https://drafts.csswg.org/css-images/#the-image-rendering
      this.domElement.style.imageRendering = 'pixelated';
    }

    // pushScene, popScene 対策
    this.on('push', function() {
      // onenter 対策で描画しておく
      this._draw();
    });
  },

  /**
   * Render the stage(container) of currentScene.
   * @private
   * @instance
   * @override
   * @memberof phina.pixi.PixiApp
   * @return {void}
   */
  _draw: function() {
    if (this.currentScene) this.renderer.render(this.currentScene.stage);
  },

  /**
   * Returns whether the current renderer is using webGL.
   * @instance
   * @memberof phina.pixi.PixiApp
   * @return {boolean}
   */
  usingWebGL: function() {
    return this.renderer instanceof PIXI.WebGLRenderer;
  },

  _static: {

    /**
     * Default parameter of phina.pixi.PixiApp
     * @static
     * @memberof phina.pixi.PixiApp
     */
    defaults: defaultParams,
  },
})</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="phina.pixi.PixiApp.html">PixiApp</a></li><li><a href="phina.pixi.PixiDisplayElement.html">PixiDisplayElement</a></li><li><a href="phina.pixi.PixiElement.html">PixiElement</a></li><li><a href="phina.pixi.PixiGauge.html">PixiGauge</a></li><li><a href="phina.pixi.PixiLabel.html">PixiLabel</a></li><li><a href="phina.pixi.PixiLayer.html">PixiLayer</a></li><li><a href="phina.pixi.PixiScene.html">PixiScene</a></li><li><a href="phina.pixi.PixiSprite.html">PixiSprite</a></li><li><a href="phina.pixi.PixiTexture.html">PixiTexture</a></li></ul><h3>Namespaces</h3><ul><li><a href="phina.html">phina</a></li><li><a href="phina.pixi.html">pixi</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Mon Mar 25 2019 00:05:00 GMT+0900 (東京 (標準時))
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>