/*!
 * 
 * phina-pixi 0.1.0
 * MIT Licensed
 * 
 * Copyright (C) pentamania, https://github.com/pentamania/phina-pixi#readme
 * 
 */
!function(t,i){if("object"==typeof exports&&"object"==typeof module)module.exports=i(require("pixi.js"),require("phina.js"));else if("function"==typeof define&&define.amd)define(["pixi.js","phina.js"],i);else{var e="object"==typeof exports?i(require("pixi.js"),require("phina.js")):i(t.PIXI,t.phina);for(var n in e)("object"==typeof exports?exports:t)[n]=e[n]}}(this,function(t,i){return function(t){var i={};function e(n){if(i[n])return i[n].exports;var s=i[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,e),s.l=!0,s.exports}return e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var s in t)e.d(n,s,function(i){return t[i]}.bind(null,s));return n},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="",e(e.s=2)}([function(i,e){i.exports=t},function(t,e){t.exports=i},function(t,i,e){"use strict";e.r(i);var n={};e.r(n),e.d(n,"PixiApp",function(){return l}),e.d(n,"PixiElement",function(){return o}),e.d(n,"PixiScene",function(){return a}),e.d(n,"PixiDisplayElement",function(){return u}),e.d(n,"PixiLayer",function(){return f}),e.d(n,"PixiSprite",function(){return p}),e.d(n,"PixiLabel",function(){return x}),e.d(n,"PixiText",function(){return x}),e.d(n,"PixiGauge",function(){return g});var s=e(1),r=e(0);const h=function(t){return"string"!=typeof t?t:(-1!==t.indexOf("#")&&(t=t.slice(1)),parseInt(t,16))},o=s.createClass({superClass:s.app.Element,init:function(){this.superInit(),this.$pixi=null},addChild:function(t){return t.parent&&parent.removeChild(t),void 0===t.$pixi?(console.warn("[phina-pixi.js]: PixiElement child is recommended to extend PixiDisplayElement",t),this.$pixi.addChild(t),t.has=function(){}):(this.$pixi.addChild(t.$pixi),t.has("added")&&t.flare("added"),t.parent=this),this.children.push(t),this},removeChild:function(t){var i=this.children.indexOf(t);return-1!==i&&(this.children.splice(i,1),void 0===t.$pixi?(this.$pixi.removeChild(t),t.has&&(t.has=null)):(this.$pixi.removeChild(t.$pixi),t.has("removed")&&t.flare("removed"),t.parent=null)),this},getPixiChildren:function(){return this.$pixi.children}}),a=s.createClass({superClass:o,init:function(t){this.superInit(),t={}.$safe(t,s.app.Object2D.defaults),this.$pixi=this.stage=new r.Container,this.width=this.stage.width=t.width,this.height=this.stage.height=t.height}}),u=s.createClass({superClass:o,init:function(t,i){this.superInit(),this.$pixi=t||new r.Container,this.scale=s.geom.Vector2(1,1),this.origin=s.geom.Vector2(.5,.5),i={}.$safe(i,s.app.Object2D.defaults),this._width=this.$pixi.width,this._height=this.$pixi.height,this.x=i.x,this.y=i.y,this.alpha=i.alpha||1,this.scaleX=i.scaleX,this.scaleY=i.scaleY,this.rotation=i.rotation,this.originX=i.originX,this.originY=i.originY},activateInteraction:function(){return this.setInteractive(!0),this._setUpInteraction(),this},_setUpInteraction:function(){["mousedown","touchstart"].forEach(function(t){this.$pixi.on(t,function(t){this.$pixi.interactive&&this.flare("pointstart")}.bind(this))}.bind(this)),["mouseup","touchend"].forEach(function(t){this.$pixi.on(t,function(t){this.$pixi.interactive&&this.flare("pointend")}.bind(this))}.bind(this)),["mouseover","touchmove"].forEach(function(t){this.$pixi.on(t,function(t){this.$pixi.interactive&&this.flare("pointmove")}.bind(this))}.bind(this))},setInteractive:function(t,i){return this.interactive=t,i&&(this.boundingType=i),this},setPosition:function(t,i){return this.$pixi.position.x=t,this.$pixi.position.y=i,this},setAlpha:function(t){return this.alpha=t,this},setSize:function(t,i){return this.width=t,this.height=i,this},setScale:function(t,i){return this.scaleX=t,arguments.length<=1?this.scaleY=t:this.scaleY=i,this},setRotation:function(t){return this.rotation=t,this},setOrigin:function(t,i){return this.originX=t,arguments.length<=1&&(i=t),this.originY=i,this},setVisible:function(t){return this.visible=t,this},clearFilter:function(){return this.$pixi.filters=[],this},addFilter:function(t,i){if(i&&this.clearFilter(),null!=this.$pixi.filters){var e=this.$pixi.filters.concat([t]);this.$pixi.filters=e}else this.$pixi.filters=[t];return this},setFilters:function(t){return Array.isArray(t)?this.$pixi.filters=t:(t=Array.prototype.slice.call(arguments),this.$pixi.filters=t),this},_accessor:{x:{get:function(){return this.$pixi.position.x},set:function(t){this.$pixi.position.x=t}},y:{get:function(){return this.$pixi.position.y},set:function(t){this.$pixi.position.y=t}},position:{get:function(){return this.$pixi.position}},width:{get:function(){return this._width},set:function(t){this._width=t,this.$pixi.width=t}},height:{get:function(){return this._height},set:function(t){this._height=t,this.$pixi.height=t}},originX:{get:function(){return this.origin.x},set:function(t){this.origin.x=t,this.$pixi.anchor?this.$pixi.anchor.x=t:this.$pixi.pivot.x=this.width*t}},originY:{get:function(){return this.origin.y},set:function(t){this.origin.y=t,this.$pixi.anchor?this.$pixi.anchor.y=t:this.$pixi.pivot.y=this.height*t}},scaleX:{get:function(){return this.$pixi.scale.x},set:function(t){this.$pixi.scale.x=t}},scaleY:{get:function(){return this.$pixi.scale.y},set:function(t){this.$pixi.scale.y=t}},radius:{get:function(){return"rect"===this.boundingType?(this.width+this.height)/4:this._radius},set:function(t){this._radius=t,this._diameter=2*t,"circle"===this.boundingType&&(this.$pixi.width=this._diameter*this._scale.x,this.$pixi.height=this._diameter*this._scale.y)}},rotation:{get:function(){return this.$pixi.rotation.toDegree()},set:function(t){this.$pixi.rotation=t.toRadian()}},alpha:{get:function(){return this.$pixi.alpha},set:function(t){this.$pixi.alpha=t}},visible:{get:function(){return this.$pixi.visible},set:function(t){this.$pixi.visible=t}},interactive:{set:function(t){this.$pixi.interactive=t}},mask:{get:function(){return this.$pixi.mask},set:function(t){this.$pixi.mask=t}},tint:{get:function(){return this.$pixi.tint},set:function(t){"string"==typeof t&&(-1!==t.indexOf("#")&&(t=t.slice(1)),t=parseInt(t,16)),this.$pixi.tint=t}},blendMode:{get:function(){return this.$pixi.blendMode},set:function(t){"string"==typeof t&&(t=r.BLEND_MODES[t]),this.$pixi.blendMode=t}},filters:{get:function(){return this.$pixi.filters},set:function(t){this.$pixi.filters=t}},worldTransform:{get:function(){return this.$pixi.worldTransform}},hitArea:{get:function(){return this.$pixi.hitArea}}}});var c={width:640,height:960,fit:!0,append:!0},l=s.createClass({superClass:s.display.DomApp,init:function(t){t={}.$safe(t,c);var i=h(t.backgroundColor),e=t.forceCanvas||!1,n=t.domElement;!n&&t.query&&(n=document.querySelector(t.query));var o=r.autoDetectRenderer(t.width,t.height,{transparent:null==i||null,forceCanvas:e,view:n},e);null!=i&&(o.backgroundColor=i),t.domElement=o.view,this.superInit(t),this.renderer=o,this.canvas=this.domElement,s.graphics.Canvas.prototype.setSize.call(this,t.width,t.height),n||t.query||!t.append||document.body.appendChild(this.domElement),t.fit&&s.graphics.Canvas.prototype.fitScreen.call(this),t.startScene?this.replaceScene(t.startScene(t)):this.replaceScene(PixiScene(t)),t.pixelated&&(this.domElement.style.imageRendering="pixelated"),this.on("push",function(){this._draw()})},_draw:function(){this.currentScene&&this.renderer.render(this.currentScene.stage)},usingWebGL:function(){return this.renderer instanceof r.WebGLRenderer},_static:{defaults:c}}),f=s.createClass({superClass:u,renderer:null,init:function(t){this.superInit(null,t),this.renderer=r.autoDetectRenderer(t.width,t.height,{transparent:!0}),this.on("enterframe",function(){this.renderer.render(this.$pixi)})},draw:function(t){var i=this.renderer.view;t.context.drawImage(i,0,0,i.width,i.height)}}),p=s.createClass({superClass:u,init:function(t){if("string"==typeof t){var i=r.loader.resources[t];if(i)t=void 0!==i.texture?new r.Sprite(i.texture):new r.Sprite(i);else{var e=s.asset.AssetManager.get("image",t);t=e?r.Sprite.fromImage(e.src):r.Sprite.fromImage(t)}}else t=new r.Sprite(t);this.superInit(t),this._texture=this.$pixi.texture,this._frameIndex=0,this._frameWidth=this.width,this._frameHeight=this.height,this.srcRect=new r.Rectangle,this._frameMaskObject=new r.Graphics,this.$pixi.addChild(this._frameMaskObject)},setFrameIndex:function(t,i,e){var n=this._frameWidth=i||this._frameWidth,s=this._frameHeight=e||this._frameHeight,r=~~(this._texture.baseTexture.width/n),h=(t%=r*~~(this._texture.baseTexture.height/s))%r,o=~~(t/r);return this.srcRect.x=-this._width*this.originX+h*n,this.srcRect.y=-this._height*this.originY+o*s,this.srcRect.width=n,this.srcRect.height=s,this._frameMaskObject.clear().beginFill().drawRect(this.srcRect.x,this.srcRect.y,this.srcRect.width,this.srcRect.height).endFill(),this.$pixi.mask=this._frameMaskObject,this._frameIndex=t,this},_accessor:{frameIndex:{get:function(){return this._frameIndex},set:function(t){return this.setFrameIndex(t),this}}},_defined:function(){var t=function(t,i){t!==i&&this.setFrameIndex(this._frameIndex,this.srcRect.width,this.srcRect.height)};["originX","originY"].forEach(function(i){this.$watch(i,t)},this.prototype)}}),d={fontFamily:"meirio, monospace, sans-serif",fill:"black",stroke:null,strokeWidth:2,text:"Hello world!",fontSize:32,fontWeight:"",align:"center",baseline:"alphabetic",lineHeight:1.2},x=s.createClass({superClass:u,init:function(t){t="object"!=typeof arguments[0]?{text:arguments[0]}:arguments[0],t={}.$safe(t,d),this.superInit(new r.Text(t.text,new r.TextStyle(t)))},_accessor:{style:{get:function(){return this.$pixi.style}},text:{get:function(){return this._text},set:function(t){this._text=t,this.$pixi.text=t,this._lines=(this.text+"").split("\n")}},font:{get:function(){return"{fontWeight} {fontSize}px {fontFamily}".format(this)}},fontFamily:{get:function(){return this.$pixi.style.fontFamily},set:function(t){this.$pixi.style.fontFamily=t}},fontSize:{get:function(){return this.$pixi.style.fontSize},set:function(t){this.$pixi.style.fontSize=t}},fontWeight:{get:function(){return this.$pixi.style.fontWeight},set:function(t){this.$pixi.style.fontWeight=t}},fill:{get:function(){return this.$pixi.style.fill},set:function(t){this.$pixi.style.fill=t}},stroke:{get:function(){return this.$pixi.style.stroke},set:function(t){this.$pixi.style.stroke=t}},strokeWidth:{get:function(){return this.$pixi.style.strokeThickness},set:function(t){this.$pixi.style.strokeThickness=t}},strokeThickness:{get:function(){return this.$pixi.style.strokeThickness},set:function(t){this.$pixi.style.strokeThickness=t}}},_static:{defaults:d}}),g=s.createClass({superClass:u,_ratio:1,_value:0,_maxWidth:0,_maxValue:100,_minValue:0,color:16777215,bgColor:2236962,init:function(t){this.superInit(new r.Graphics),this._maxWidth=this.width=t.width,this.height=t.height||20,this._maxValue=t.max||100,this._minValue=t.min||0,this._gaugeAlpha=1,this.value=t.value||100,this.setColor(t.color,t.bgColor),this.setOrigin(0,.5),null!=t.ratio&&this.setRatio(t.ratio)},setRatio:function(t){return t=Math.clamp(t,0,1),this._ratio=t,this._drawGauge(),this},setValue:function(t){return t=Math.clamp(t,this._minValue,this._maxValue),this._value=t,this.ratio=t/this._maxValue,this._drawGauge(),this},setColor:function(t,i){return null!=t&&("string"==typeof t&&(t=h(t)),this.color=t),null!=i&&("string"==typeof i&&(i=h(i)),this.bgColor=i),this._drawGauge(),this},refill:function(){return this.value=this.max,this},_drawGauge:function(){this.$pixi.clear().beginFill(this.bgColor,1).drawRect(0,0,this._maxWidth,this.height).endFill().beginFill(this.color,this._gaugeAlpha).drawRect(0,0,this._maxWidth*this.ratio,this.height).endFill()},setMask:function(){var t=new r.Graphics;return t.beginFill(),t.drawRect(0,0,this.width,this.height),t.endFill(),t.x=this._maxWidth,t.y=this.height,this.addChild(t),this.mask=t,this},_accessor:{ratio:{get:function(){return this._ratio},set:function(t){this.setRatio(t)}},value:{get:function(){return this._value},set:function(t){this.setValue(t)}},max:{get:function(){return this._maxValue},set:function(t){this._maxValue=t}},min:{get:function(){return this._minValue},set:function(t){this._minValue=t}},isMax:{get:function(){return this._value===this._maxValue}},isNeg:{get:function(){return this._value<0}}}});e.d(i,"PixiApp",function(){return l}),e.d(i,"PixiElement",function(){return o}),e.d(i,"PixiScene",function(){return a}),e.d(i,"PixiDisplayElement",function(){return u}),e.d(i,"PixiLayer",function(){return f}),e.d(i,"PixiSprite",function(){return p}),e.d(i,"PixiLabel",function(){return x}),e.d(i,"PixiText",function(){return x}),e.d(i,"PixiGauge",function(){return g}),window.phina.pixi=n}])});