/*!
 * 
 * phina-pixi 0.2.0
 * MIT Licensed
 * 
 * Copyright (C) pentamania, https://github.com/pentamania/phina-pixi#readme
 * 
 */
!function(t,i){if("object"==typeof exports&&"object"==typeof module)module.exports=i(require("phina.js"),require("pixi.js"));else if("function"==typeof define&&define.amd)define(["phina.js","pixi.js"],i);else{var e="object"==typeof exports?i(require("phina.js"),require("pixi.js")):i(t.phina,t.PIXI);for(var n in e)("object"==typeof exports?exports:t)[n]=e[n]}}(this,function(t,i){return function(t){var i={};function e(n){if(i[n])return i[n].exports;var s=i[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,e),s.l=!0,s.exports}return e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var s in t)e.d(n,s,function(i){return t[i]}.bind(null,s));return n},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="",e(e.s=2)}([function(i,e){i.exports=t},function(t,e){t.exports=i},function(t,i,e){"use strict";e.r(i);var n={};e.r(n),e.d(n,"PixiApp",function(){return l}),e.d(n,"PixiElement",function(){return o}),e.d(n,"PixiScene",function(){return u}),e.d(n,"PixiDisplayElement",function(){return a}),e.d(n,"PixiTexture",function(){return p}),e.d(n,"PixiSprite",function(){return d}),e.d(n,"PixiLayer",function(){return x}),e.d(n,"PixiLabel",function(){return m}),e.d(n,"PixiText",function(){return m}),e.d(n,"PixiGauge",function(){return _});var s=e(0);s.app.Updater.prototype._updateElement=function(t){var i=this.app;if(!t.awake||!1!==t.awake){t.has&&t.has("enterframe")&&t.flare("enterframe",{app:this.app}),t.update&&t.update(i);var e=t.children.length;if(t.children.length>0)for(var n=t.children.slice(),s=0;s<e;++s)this._updateElement(n[s])}};var r=e(1);const h=function(t){return"string"!=typeof t?t:(-1!==t.indexOf("#")&&(t=t.slice(1)),parseInt(t,16))},o=s.createClass({superClass:s.app.Element,init:function(){this.superInit(),this.$pixi=null},addChild:function(t){return t.parent&&parent.removeChild(t),void 0===t.$pixi?this.$pixi.addChild(t):(this.$pixi.addChild(t.$pixi),t.has("added")&&t.flare("added"),t.parent=this),this.children.push(t),this},removeChild:function(t){var i=this.children.indexOf(t);return-1!==i&&(this.children.splice(i,1),void 0===t.$pixi?this.$pixi.removeChild(t):(this.$pixi.removeChild(t.$pixi),t.has("removed")&&t.flare("removed"),t.parent=null)),this},getPixiChildren:function(){return this.$pixi.children}}),u=s.createClass({superClass:o,init:function(t){this.superInit(),t={}.$safe(t,s.app.Object2D.defaults),this.$pixi=this.stage=new r.Container,this.width=this.stage.width=t.width,this.height=this.stage.height=t.height}}),a=s.createClass({superClass:o,init:function(t,i){this.superInit(),this.$pixi=t||new r.Container,this.scale=s.geom.Vector2(1,1),this.origin=s.geom.Vector2(.5,.5),i={}.$safe(i,s.app.Object2D.defaults),this._width=this.$pixi.width,this._height=this.$pixi.height,this.x=i.x,this.y=i.y,this.alpha=i.alpha||1,this.scaleX=i.scaleX,this.scaleY=i.scaleY,this.rotation=i.rotation,this.originX=i.originX,this.originY=i.originY},activateInteraction:function(){return this.setInteractive(!0),this._setUpInteraction(),this},_setUpInteraction:function(){["mousedown","touchstart"].forEach(function(t){this.$pixi.on(t,function(t){this.$pixi.interactive&&this.flare("pointstart")}.bind(this))}.bind(this)),["mouseup","touchend"].forEach(function(t){this.$pixi.on(t,function(t){this.$pixi.interactive&&this.flare("pointend")}.bind(this))}.bind(this)),["mouseover","touchmove"].forEach(function(t){this.$pixi.on(t,function(t){this.$pixi.interactive&&this.flare("pointmove")}.bind(this))}.bind(this))},setInteractive:function(t,i){return this.interactive=t,i&&(this.boundingType=i),this},setPosition:function(t,i){return this.$pixi.position.x=t,this.$pixi.position.y=i,this},setAlpha:function(t){return this.alpha=t,this},setSize:function(t,i){return this.width=t,this.height=i,this},setScale:function(t,i){return this.scaleX=t,arguments.length<=1?this.scaleY=t:this.scaleY=i,this},setRotation:function(t){return this.rotation=t,this},setOrigin:function(t,i){return this.originX=t,arguments.length<=1&&(i=t),this.originY=i,this},setVisible:function(t){return this.visible=t,this},clearFilter:function(){return this.$pixi.filters=[],this},addFilter:function(t,i){if(i&&this.clearFilter(),null!=this.$pixi.filters){var e=this.$pixi.filters.concat([t]);this.$pixi.filters=e}else this.$pixi.filters=[t];return this},setFilters:function(t){return Array.isArray(t)?this.$pixi.filters=t:(t=Array.prototype.slice.call(arguments),this.$pixi.filters=t),this},_accessor:{x:{get:function(){return this.$pixi.position.x},set:function(t){this.$pixi.position.x=t}},y:{get:function(){return this.$pixi.position.y},set:function(t){this.$pixi.position.y=t}},position:{get:function(){return this.$pixi.position}},width:{get:function(){return this._width},set:function(t){this._width=t,this.$pixi.width=t}},height:{get:function(){return this._height},set:function(t){this._height=t,this.$pixi.height=t}},originX:{get:function(){return this.origin.x},set:function(t){this.origin.x=t,this.$pixi.anchor?this.$pixi.anchor.x=t:this.$pixi.pivot.x=this.width*t}},originY:{get:function(){return this.origin.y},set:function(t){this.origin.y=t,this.$pixi.anchor?this.$pixi.anchor.y=t:this.$pixi.pivot.y=this.height*t}},scaleX:{get:function(){return this.$pixi.scale.x},set:function(t){this.$pixi.scale.x=t}},scaleY:{get:function(){return this.$pixi.scale.y},set:function(t){this.$pixi.scale.y=t}},radius:{get:function(){return"rect"===this.boundingType?(this.width+this.height)/4:this._radius},set:function(t){this._radius=t,this._diameter=2*t,"circle"===this.boundingType&&(this.$pixi.width=this._diameter*this._scale.x,this.$pixi.height=this._diameter*this._scale.y)}},rotation:{get:function(){return this.$pixi.rotation.toDegree()},set:function(t){this.$pixi.rotation=t.toRadian()}},alpha:{get:function(){return this.$pixi.alpha},set:function(t){this.$pixi.alpha=t}},visible:{get:function(){return this.$pixi.visible},set:function(t){this.$pixi.visible=t}},interactive:{set:function(t){this.$pixi.interactive=t}},mask:{get:function(){return this.$pixi.mask},set:function(t){this.$pixi.mask=t}},tint:{get:function(){return this.$pixi.tint},set:function(t){"string"==typeof t&&(-1!==t.indexOf("#")&&(t=t.slice(1)),t=parseInt(t,16)),this.$pixi.tint=t}},blendMode:{get:function(){return this.$pixi.blendMode},set:function(t){"string"==typeof t&&(t=r.BLEND_MODES[t]),this.$pixi.blendMode=t}},filters:{get:function(){return this.$pixi.filters},set:function(t){this.$pixi.filters=t}},worldTransform:{get:function(){return this.$pixi.worldTransform}},hitArea:{get:function(){return this.$pixi.hitArea}}}});var c={width:640,height:960,fit:!0,append:!0},l=s.createClass({superClass:s.display.DomApp,init:function(t){t={}.$safe(t,c);var i=h(t.backgroundColor),e=t.forceCanvas||!1,n=t.domElement;!n&&t.query&&(n=document.querySelector(t.query));var o=r.autoDetectRenderer(t.width,t.height,{transparent:null==i||null,forceCanvas:e,view:n},e);null!=i&&(o.backgroundColor=i),t.domElement=o.view,this.superInit(t),this.renderer=o,this.canvas=this.domElement,s.graphics.Canvas.prototype.setSize.call(this,t.width,t.height),n||t.query||!t.append||document.body.appendChild(this.domElement),t.fit&&s.graphics.Canvas.prototype.fitScreen.call(this),t.startScene?this.replaceScene(t.startScene(t)):this.replaceScene(PixiScene(t)),t.pixelated&&(this.domElement.style.imageRendering="pixelated"),this.on("push",function(){this._draw()})},_draw:function(){this.currentScene&&this.renderer.render(this.currentScene.stage)},usingWebGL:function(){return this.renderer instanceof r.WebGLRenderer},_static:{defaults:c}}),f=s.createClass({superClass:s.asset.Asset,init:function(t){this.superInit(),this._key=t||null,this.texture=null,this.textures=null},_load:function(t){r.loader.add(this._key,this.src).load(function(i,e){var n=e[this._key];n.texture?this.texture=n.texture:n.textures&&(this.textures=n.textures),t(this)}.bind(this))},createFrame:function(t,i,e,n){"object"==typeof t&&(i=t.y,e=t.width,n=t.height,t=t.x),t=t||0,i=i||0,e=e||this.texture.baseTexture.width,n=n||this.texture.baseTexture.height;var s=f();return s.texture=new r.Texture(this.texture.baseTexture,new r.Rectangle(t,i,e,n)),s},fromCanvas:function(t){return this.texture=r.Texture.fromCanvas(t),this},fromShape:function(t){return t._dirtyDraw&&t.render(t.canvas),this.fromCanvas(t.canvas.domElement)},update:function(){return this.texture.update(),this},_accessor:{width:{get:function(){return this.texture.width},set:function(t){this.texture.width=t}},height:{get:function(){return this.texture.height},set:function(t){this.texture.height=t}}},_static:{fromCanvas:function(t){return f().fromCanvas(t)},fromShape:function(t){return f().fromShape(t)}}});s.asset.AssetLoader.assetLoadFunctions.pixi=function(t,i){return f(t).load(i)};var p=f,d=s.createClass({superClass:a,_image:null,init:function(t,i,e){this.superInit(new r.Sprite),this._frameIndex=0,this._frameWidth=0,this._frameHeight=0,this.setImage(t,0,0,i,e)},setImage:function(t,i,e,n,r){return"string"==typeof t&&(t=s.asset.AssetManager.get("pixi",t)),t.createFrame&&"number"==typeof i&&(t=t.createFrame(i,e,n,r)),this._image=t,this._setFrame(t),this},_setFrame:function(t){var i=t.texture;this.$pixi.texture=i,this.width=i.width,this.height=i.height,this.setOrigin(this.originX,this.originY)},setFrameIndex:function(t,i,e){var n=this._frameWidth=i||this._frameWidth,s=this._frameHeight=e||this._frameHeight,r=~~(this.$pixi.texture.baseTexture.width/n),h=(t%=r*~~(this.$pixi.texture.baseTexture.height/s))%r,o=~~(t/r);return this.setImage(this._image,h*n,o*s,n,s),this._frameIndex=t,this},_accessor:{frameIndex:{get:function(){return this._frameIndex},set:function(t){return this.setFrameIndex(t),this}}}}),x=s.createClass({superClass:a,renderer:null,init:function(t){t={}.$safe(t,{width:640,height:960}),this.superInit(null,t),this.renderer=r.autoDetectRenderer(t.width,t.height,{transparent:!0}),this._width=t.width,this._height=t.height,this.setOrigin(0,0),this._matrix=s.geom.Matrix33().identity(),this._worldMatrix=s.geom.Matrix33().identity(),this.on("enterframe",function(){this.renderer.render(this.$pixi)})},_calcWorldMatrix:function(){return s.app.Object2D.prototype._calcWorldMatrix()},draw:function(t){var i=this.renderer.view;t.context.drawImage(i,0,0,i.width,i.height)},_accessor:{width:{get:function(){return this._width},set:function(t){this._width=t,this.renderer.resize(t,this.height)}},height:{get:function(){return this._height},set:function(t){this._height=t,this.renderer.resize(this.width,t)}}}}),g={fontFamily:"meirio, monospace, sans-serif",fill:"black",stroke:null,strokeWidth:2,text:"Hello world!",fontSize:32,fontWeight:"",align:"center",baseline:"alphabetic",lineHeight:1.2},m=s.createClass({superClass:a,init:function(t){t="object"!=typeof arguments[0]?{text:arguments[0]}:arguments[0],t={}.$safe(t,g),this.superInit(new r.Text(t.text,new r.TextStyle(t)))},_accessor:{style:{get:function(){return this.$pixi.style}},text:{get:function(){return this._text},set:function(t){this._text=t,this.$pixi.text=t,this._lines=(this.text+"").split("\n")}},font:{get:function(){return"{fontWeight} {fontSize}px {fontFamily}".format(this)}},fontFamily:{get:function(){return this.$pixi.style.fontFamily},set:function(t){this.$pixi.style.fontFamily=t}},fontSize:{get:function(){return this.$pixi.style.fontSize},set:function(t){this.$pixi.style.fontSize=t}},fontWeight:{get:function(){return this.$pixi.style.fontWeight},set:function(t){this.$pixi.style.fontWeight=t}},fill:{get:function(){return this.$pixi.style.fill},set:function(t){this.$pixi.style.fill=t}},stroke:{get:function(){return this.$pixi.style.stroke},set:function(t){this.$pixi.style.stroke=t}},strokeWidth:{get:function(){return this.$pixi.style.strokeThickness},set:function(t){this.$pixi.style.strokeThickness=t}},strokeThickness:{get:function(){return this.$pixi.style.strokeThickness},set:function(t){this.$pixi.style.strokeThickness=t}}},_static:{defaults:g}}),_=s.createClass({superClass:a,_ratio:1,_value:0,_maxWidth:0,_maxValue:100,_minValue:0,color:16777215,bgColor:2236962,init:function(t){this.superInit(new r.Graphics),this._maxWidth=this.width=t.width,this.height=t.height||20,this._maxValue=t.max||100,this._minValue=t.min||0,this._gaugeAlpha=1,this.value=t.value||100,this.setColor(t.color,t.bgColor),this.setOrigin(0,.5),null!=t.ratio&&this.setRatio(t.ratio)},setRatio:function(t){return t=Math.clamp(t,0,1),this._ratio=t,this._drawGauge(),this},setValue:function(t){return t=Math.clamp(t,this._minValue,this._maxValue),this._value=t,this.ratio=t/this._maxValue,this._drawGauge(),this},setColor:function(t,i){return null!=t&&("string"==typeof t&&(t=h(t)),this.color=t),null!=i&&("string"==typeof i&&(i=h(i)),this.bgColor=i),this._drawGauge(),this},refill:function(){return this.value=this.max,this},_drawGauge:function(){this.$pixi.clear().beginFill(this.bgColor,1).drawRect(0,0,this._maxWidth,this.height).endFill().beginFill(this.color,this._gaugeAlpha).drawRect(0,0,this._maxWidth*this.ratio,this.height).endFill()},setMask:function(){var t=new r.Graphics;return t.beginFill(),t.drawRect(0,0,this.width,this.height),t.endFill(),t.x=this._maxWidth,t.y=this.height,this.addChild(t),this.mask=t,this},_accessor:{ratio:{get:function(){return this._ratio},set:function(t){this.setRatio(t)}},value:{get:function(){return this._value},set:function(t){this.setValue(t)}},max:{get:function(){return this._maxValue},set:function(t){this._maxValue=t}},min:{get:function(){return this._minValue},set:function(t){this._minValue=t}},isMax:{get:function(){return this._value===this._maxValue}},isNeg:{get:function(){return this._value<0}}}});e.d(i,"PixiApp",function(){return l}),e.d(i,"PixiElement",function(){return o}),e.d(i,"PixiScene",function(){return u}),e.d(i,"PixiDisplayElement",function(){return a}),e.d(i,"PixiTexture",function(){return p}),e.d(i,"PixiSprite",function(){return d}),e.d(i,"PixiLayer",function(){return x}),e.d(i,"PixiLabel",function(){return m}),e.d(i,"PixiText",function(){return m}),e.d(i,"PixiGauge",function(){return _}),window.phina.pixi=n}])});